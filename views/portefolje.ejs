<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Portefolje</title>
  <link rel="stylesheet" href="portefolje.css">
</head>
<body>
  <h1>Min portefølje</h1>
  <p>Her kan du se din portefølje</p>
  <a href="/"><button class="home-button">Home</button></a>
</body>
<script>

  const brukernavn = localStorage.getItem('brukernavn');
  if (!brukernavn) {
    alert('Du må være logget inn for å se porteføljen.');
    window.location.href = '/login';
  }

  fetch('/portefolje', {
    headers: {
      'brukernavn': brukernavn
    }
  })
    .then(res => {
      if (!res.ok) {
        throw new Error('Ikke logget inn');
      }
      return res.json();
    })
    .then(data => {
      console.log('Eiendeler:', data.items);
      // Vis data i UI
      const portfolioContainer = document.getElementById('portfolio-container');
      if (data.items && data.items.length > 0) {
        data.items.forEach(item => {
          const itemElement = document.createElement('p');
          itemElement.textContent = `Eiendel: ${item.name}, Verdi: ${item.value}`;
          portfolioContainer.appendChild(itemElement);
        });
      } else {
        portfolioContainer.textContent = 'Ingen eiendeler funnet.';
      }
    })
    .catch(error => {
      alert(error.message);
      window.location.href = '/login';
    });
</script>
</html>